name: Debug Terraform Secrets

on:
  workflow_dispatch:

jobs:
  debug:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Debug Terraform Secret
        run: |
          echo '${{ secrets.TERRAFORM }}' > terraform.json
          jq '.' terraform.json || cat terraform.json

      - name: Write Terraform Code to File
        run: |
          echo "ğŸ“ Writing Terraform code to main.tf..."
          echo "${{ secrets.TERRAFORM }}" | sed 's/\\n/\n/g' > main.tf
          echo "âœ… File main.tf has been created."

      - name: Verify File Contents
        run: |
          echo "ğŸ” Checking main.tf..."
          ls -lah main.tf
          echo "ğŸ“– First 20 lines of main.tf:"
          head -n 20 main.tf

#      - name: Validate Terraform Syntax
#        run: |
#          echo "ğŸ” Running t
